(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"HaE+":function(e,t,n){"use strict";function a(e,t,n,a,o,l,r){try{var i=e[l](r),c=i.value}catch(u){return void n(u)}i.done?t(c):Promise.resolve(c).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,l){var r=e.apply(t,n);function i(e){a(r,o,l,i,c,"next",e)}function c(e){a(r,o,l,i,c,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return o}))},oQRt:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),o=n.n(a),l=n("HaE+"),r=n("ODXe"),i=(n("wx14"),n("q1tI")),c=n.n(i),u=n("nOHt"),s=n("8Kt/"),d=n.n(s),p=n("t8Fj"),m=n.n(p),g=n("vOnD"),h=n("7DIm"),f=n("XoTP"),b=n("EnxY"),y=n("OdHS"),v=n("6jvx"),x=n("b01i"),w=n("txJt"),j=n("tRbT"),k=n("kKAo"),O=n("Ji2X"),P=n("wb2y"),C=n("R/WZ"),L=n("eD//"),S=n("tVbE"),T=n("56Ss"),E=n("IsqK"),D=n("XcVC"),F=n("Ti5m"),R=n.n(F),W=n("WA69"),_=n.n(W),A=n("gALc"),H=n.n(A),U=n("ldhQ"),V=n.n(U),X=n("r9w1"),q=n("LnxZ"),B=n("RytF"),I=n("vDqi"),J=n.n(I),K=n("DNyS"),N=n("KYPV"),Q=n("UGp+"),Z=n("ttZb"),z=n("uVoW"),G=n("OGHJ"),Y=c.a.createElement,M=Object(C.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));t.default=function(){var e=M(),t=Object(u.useRouter)().query,n=(Object(K.b)(),Object(K.c)(),Object(i.useState)(!1)),a=n[0],c=n[1],s=Object(i.useState)(""),p=s[0],C=s[1],F=Object(Z.c)(z.g,{onCompleted:function(e){console.log(e),C("Project Added succesfully!"),c(!1),ee()},onError:function(e){console.log(e),C("Sorry an error occurred. Please try again!")}}),W=Object(r.a)(F,1)[0],A=Object(N.a)({initialValues:{update:"",images:[]},onSubmit:function(e){console.log("On Submit"),console.log(e,"Query",t.project),c(!0),C(null),W({variables:{field:{data:{images:e.images.length?e.images:null,update:e.update,project:t.project}}}})},validationSchema:Q.c().shape({update:Q.e().required("Please Enter Project Update!"),images:Q.a()})}),U=A.handleBlur,I=A.handleChange,$=A.handleSubmit,ee=A.handleReset,te=(A.values,A.touched),ne=A.errors,ae=A.setFieldValue,oe=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,n),!t.length){e.next=16;break}return c(!0),a=new FormData,t.forEach((function(e){a.append("files",e)})),e.prev=5,e.next=8,J.a.post("http://localhost:1337/upload",a,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){if(console.log(e.data),"images"==n){var t=[];e.data.map((function(e){t.push(e.id)})),ae("images",t)}c(!1)}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0,"error"),C("Sorry an error occurred. Please try again!");case 14:e.next=17;break;case 16:ae("images",[]);case 17:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Y(g.a,{theme:h.a},Y(i.Fragment,null,Y(d.a,null,Y("title",null,"Update | Esaar"),Y("meta",{name:"Description",content:"React next landing page"}),Y("meta",{name:"theme-color",content:"#FCF22B"}),Y("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),Y("link",{href:"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap",rel:"stylesheet"})),Y(f.a,null),Y(w.c,null),Y(w.a,null,Y(m.a,{top:0,innerZ:9999,activeClass:"sticky-nav-active"},Y(y.a,null)),Y(b.b,null,Y(v.a,null)),Y(w.b,null,Y(j.a,{container:!0,style:{maxWidth:"1170px",minHeight:"100vh",paddingTop:"140px",marginLeft:"170px"}},Y(j.a,{item:!0,md:3},Y(k.a,{style:{height:"90vh"}},Y(O.a,{style:{padding:"40px"}},Y("div",{className:e.root},Y(L.a,{component:"nav","aria-label":"main mailbox folders"},Y(Link,{href:"/account_o"},Y(S.a,{button:!0},Y(T.a,null,Y(R.a,null)),Y(E.a,{primary:"Account"}))),Y(P.a,null),Y(Link,{href:"/addProject"},Y(S.a,{button:!0},Y(T.a,null,Y(_.a,null)),Y(E.a,{primary:"Add Project "}))),Y(P.a,null),Y(Link,{href:"/pastProject"},Y(S.a,{button:!0},Y(T.a,null,Y(H.a,null)),Y(E.a,{primary:"Projects"}))),Y(P.a,null),Y(S.a,{button:!0,onClick:handleLogout},Y(T.a,null,Y(V.a,null)),Y(E.a,{primary:"Logout"}))))))),Y(j.a,{item:!0,md:8,style:{marginLeft:"30px"}},Y(k.a,{style:{height:"150vh"}},Y(O.a,{style:{padding:"40px"}}," ",Y(D.a,{content:"Latest Update",color:"#05B890"})," ",Y(P.a,null),Y(j.a,{item:!0,md:7,style:{marginTop:"30px"}},Y(D.a,{content:"Update Details",as:"h4",style:{marginTop:"1rem"}})," ",Y(X.a,{name:"update",onChange:I,onBlur:U,error:ne.update&&te.update,helperText:ne.update&&te.update?ne.update:null,label:"",variant:"outlined",size:"large",multiline:!0,rows:7,style:{color:"#05B890"},fullWidth:!0})),Y(D.a,{content:"Related Images",as:"h4",style:{marginTop:"1rem"}}),Y(q.a,{acceptedFiles:["image/*"],dropzoneText:"Drag and drop images here or click",onChange:function(e){return oe(e,"images")}})),Y(j.a,{container:!0,item:!0,md:12,style:{paddingLeft:"40px",alignContent:"center"}},p?Y(B.a,{style:{color:"orange"},content:p}):null),Y(j.a,{container:!0,item:!0,md:12,style:{alignContent:"center"}},Y(G.a,{title:"Send Update",variant:"extendedFab",onClick:$,disabled:a,isLoading:a,style:{marginTop:"20px",marginLeft:"260px",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"200px",height:"auto"}})))))),Y(x.a,null))))}},s4oe:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/update",function(){return n("oQRt")}])}},[["s4oe",0,2,1,3,6,4,5,7,8,10,13,12,11,14,15,18,19,9]]]);