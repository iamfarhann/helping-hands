{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{\"3en3\":function(e,n,t){\"use strict\";t.r(n);var a=t(\"o0o1\"),r=t.n(a),i=t(\"HaE+\"),o=t(\"ODXe\"),l=t(\"q1tI\"),c=t.n(l),s=t(\"RytF\"),u=t(\"OGHJ\"),d=t(\"YFqc\"),m=t.n(d),g=t(\"8Kt/\"),p=t.n(g),f=t(\"t8Fj\"),h=t.n(f),b=t(\"vOnD\"),y=t(\"7DIm\"),j=t(\"XoTP\"),v=t(\"EnxY\"),x=t(\"OdHS\"),O=t(\"6jvx\"),T=t(\"b01i\"),I=t(\"txJt\"),w=t(\"4fwK\"),P=t(\"tRbT\"),D=t(\"kKAo\"),S=t(\"Ji2X\"),A=t(\"wb2y\"),C=t(\"vDqi\"),k=t.n(C),q=t(\"R/WZ\"),E=t(\"eD//\"),F=t(\"tVbE\"),z=t(\"56Ss\"),N=t(\"IsqK\"),V=t(\"XcVC\"),R=t(\"Ti5m\"),W=t.n(R),B=t(\"WA69\"),L=t.n(B),J=t(\"gALc\"),K=t.n(J),X=t(\"ldhQ\"),_=t.n(X),Z=t(\"r9w1\"),$=t(\"DNyS\"),H=t(\"KYPV\"),Y=t(\"UGp+\"),G=t(\"ttZb\"),Q=t(\"uVoW\"),U=t(\"LnxZ\"),M=c.a.createElement,ee=Object(q.a)((function(e){return{root:{width:\"100%\",maxWidth:360,backgroundColor:e.palette.background.paper}}})),ne=function(){console.log(\"logout called\"),cookie.remove(\"token\"),dispatch({type:\"LOGOUT\",payload:{}}),window.location=\"/\"};n.default=function(){var e=ee(),n=(Object($.c)(),Object($.b)()),t=Object(l.useState)([]),a=(t[0],t[1],Object(l.useState)(null)),c=(a[0],a[1],Object(l.useState)(null)),d=(c[0],c[1],Object(l.useState)(null)),g=(d[0],d[1],Object(l.useState)(null)),f=(g[0],g[1],Object(l.useState)(\"\")),C=(f[0],f[1],Object(l.useState)(!1)),q=C[0],R=C[1],B=Object(l.useState)(\"\"),J=B[0],X=B[1],te=Object(l.useState)(!1),ae=(te[0],te[1],Object(l.useState)(\"\")),re=(ae[0],ae[1],Object(G.c)(Q.c,{onCompleted:function(e){console.log(e),X(\"Project Added succesfully!\"),R(!1),de()},onError:function(e){console.log(e),X(\"Sorry an error occurred. Please try again!\")}})),ie=Object(o.a)(re,1)[0],oe=[{name:Y.e().required(\"Please Enter Project Title\"),targetAmount:Y.b().required(\"Please Enter Target Amount\"),shortDescription:Y.e().required(\"Please Enter Short Description\"),description:Y.e().required(\"Please Enter Project Details\"),titleImage:Y.e().required(\"Please Upload a title image\"),relatedImages:Y.a(),tags:Y.a()}],le=Object(H.a)({initialValues:{name:\"\",targetAmount:0,shortDescription:\"\",description:\"\",titleImage:\"\",relatedImages:[],tags:[]},onSubmit:function(e){console.log(\"On Submit\"),console.log(e),R(!0),X(null),ie({variables:{fields:{data:{titleImage:e.titleImage,relatedImages:e.relatedImages.length?e.relatedImages:null,name:e.name,targetAmount:e.targetAmount,shortDescription:e.shortDescription,description:e.description,organization:n.id,status:\"active\",tags:e.tags.length?e.tags.map((function(e){return e.id})):null}}}})},validationSchema:Y.c().shape(oe[0])}),ce=le.handleBlur,se=le.handleChange,ue=le.handleSubmit,de=le.handleReset,me=le.values,ge=le.touched,pe=le.errors,fe=le.setFieldValue,he=function(){var e=Object(i.a)(r.a.mark((function e(n,t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n,t),!n.length){e.next=16;break}return R(!0),a=new FormData,n.forEach((function(e){a.append(\"files\",e)})),e.prev=5,e.next=8,k.a.post(\"http://localhost:1337/upload\",a,{headers:{\"Content-type\":\"multipart/form-data\"}}).then((function(e){if(console.log(e.data),\"titleImage\"==t&&fe(\"titleImage\",e.data[0].id),\"relatedImages\"==t){var n=[];e.data.map((function(e){n.push(e.id)})),fe(\"relatedImages\",n)}R(!1)}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0,\"error\"),X(\"Sorry an error occurred. Please try again!\");case 14:e.next=17;break;case 16:fe(\"titleImage\",\"\");case 17:case\"end\":return e.stop()}}),e,null,[[5,10]])})));return function(n,t){return e.apply(this,arguments)}}();return M(b.a,{theme:y.a},M(l.Fragment,null,M(p.a,null,M(\"title\",null,\"My Account | Esaar\"),M(\"meta\",{name:\"Description\",content:\"React next landing page\"}),M(\"meta\",{name:\"theme-color\",content:\"#FCF22B\"}),M(\"meta\",{name:\"viewport\",content:\"width=device-width, initial-scale=1.0\"}),M(\"link\",{href:\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap\",rel:\"stylesheet\"})),M(j.a,null),M(I.c,null),M(I.a,null,M(h.a,{top:0,innerZ:9999,activeClass:\"sticky-nav-active\"},M(x.a,null)),M(v.b,null,M(O.a,null)),M(I.b,null,M(P.a,{container:!0,style:{maxWidth:\"1170px\",minHeight:\"100vh\",paddingTop:\"140px\",marginLeft:\"170px\"}},M(P.a,{item:!0,md:3},M(D.a,{style:{height:\"100%\"}},M(S.a,{style:{padding:\"40px\"}},M(\"div\",{className:e.root},M(E.a,{component:\"nav\",\"aria-label\":\"main mailbox folders\"},M(m.a,{href:\"/account_o\"},M(F.a,{button:!0},M(z.a,null,M(W.a,null)),M(N.a,{primary:\"Account\"}))),M(A.a,null),M(m.a,{href:\"/addProject\"},M(F.a,{button:!0},M(z.a,null,M(L.a,null)),M(N.a,{primary:\"Add Project \"}))),M(A.a,null),M(m.a,{href:\"/myProjects\"},M(F.a,{button:!0},M(z.a,null,M(K.a,null)),M(N.a,{primary:\"Projects\"}))),M(A.a,null),M(F.a,{button:!0,onClick:ne},M(z.a,null,M(_.a,null)),M(N.a,{primary:\"Logout\"}))))))),M(P.a,{item:!0,md:8,style:{marginLeft:\"30px\"}},M(D.a,{style:{height:\"100%\"}},M(S.a,{style:{padding:\"40px\"}},\" \",M(V.a,{content:\"Add Project\",color:\"#05B890\"}),\" \",M(A.a,null),M(P.a,{item:!0,md:7,style:{marginTop:\"30px\"}},M(V.a,{content:\"Project Title\",as:\"h4\",style:{marginTop:\"1rem\"}}),\" \",M(Z.a,{name:\"name\",onChange:se,onBlur:ce,error:pe.name&&ge.name,helperText:pe.name&&ge.name?pe.name:null,label:\"\",variant:\"outlined\",size:\"small\",style:{color:\"#3E2672\"},fullWidth:!0}),M(V.a,{content:\"Target Amount\",as:\"h4\",style:{marginTop:\"1rem\"}}),\" \",M(Z.a,{name:\"targetAmount\",type:\"number\",onChange:se,onBlur:ce,error:pe.targetAmount&&ge.targetAmount,helperText:pe.targetAmount&&ge.targetAmount?pe.targetAmount:null,id:\"outlined-basic\",label:\"in PKR\",variant:\"outlined\",size:\"small\",fullWidth:!0}),M(w.a,{values:me,setFieldValue:fe}),M(V.a,{content:\"Short Description\",as:\"h4\",style:{marginTop:\"1rem\"}}),\" \",M(Z.a,{name:\"shortDescription\",onChange:se,onBlur:ce,error:pe.shortDescription&&ge.shortDescription,helperText:pe.shortDescription&&ge.shortDescription?pe.shortDescription:null,id:\"outlined-basic\",label:\"\",variant:\"outlined\",size:\"small\",style:{color:\"#05B890\"},fullWidth:!0}),M(V.a,{content:\"Project Details\",as:\"h4\",style:{marginTop:\"1rem\"}}),\" \",M(Z.a,{name:\"description\",onChange:se,onBlur:ce,error:pe.description&&ge.description,helperText:pe.description&&ge.description?pe.description:null,id:\"outlined-basic\",label:\"\",variant:\"outlined\",size:\"large\",multiline:!0,rows:5,style:{color:\"#05B890\"},fullWidth:!0})),M(V.a,{content:\"Title Image\",as:\"h4\",style:{marginTop:\"1rem\"}}),M(U.a,{acceptedFiles:[\"image/*\"],dropzoneText:\"Drag and drop an image here or click\",onChange:function(e){return he(e,\"titleImage\")}}),pe.titleImage?M(s.a,{style:{color:\"orange\"},content:pe.titleImage}):null,M(V.a,{content:\"Related Images\",as:\"h4\",style:{marginTop:\"1rem\"}}),M(U.a,{acceptedFiles:[\"image/*\"],dropzoneText:\"Drag and drop images here or click\",onChange:function(e){return he(e,\"relatedImages\")}})),M(P.a,{container:!0,item:!0,md:12,style:{paddingLeft:\"40px\",alignContent:\"center\"}},J?M(s.a,{style:{color:\"orange\"},content:J}):null),M(P.a,{container:!0,item:!0,md:12,style:{alignContent:\"center\"}},M(u.a,{title:\"Create Project\",variant:\"extendedFab\",onClick:ue,disabled:q,isLoading:q,style:{marginTop:\"20px\",marginLeft:\"260px\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",minWidth:\"200px\",height:\"auto\"}})))))),M(T.a,null))))}},\"4fwK\":function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return g}));var a=t(\"q1tI\"),r=t.n(a),i=t(\"R/WZ\"),o=t(\"XcVC\"),l=t(\"ttZb\"),c=t(\"9jPY\"),s=t(\"R9qi\"),u=t(\"wb2y\"),d=r.a.createElement,m=Object(i.a)((function(e){return{}}));function g(e){var n=e.values,t=e.setFieldValue,i=(m(),Object(a.useState)([])),g=i[0],p=i[1],f=Object(l.d)(s.c,{skip:!n}),h=f.data,b=f.loading;f.error;Object(a.useEffect)((function(){h&&p(h.tags)}),[h,b]);return d(r.a.Fragment,null,d(o.a,{content:\"Tags\",as:\"h4\",style:{marginTop:\"1rem\"}}),!n.tags.length&&d(o.a,{as:\"h6\",content:\"No Additional Tag Selected\"}),n.tags.map((function(e){return d(c.a,{key:e.id,size:\"small\",color:\"secondary\",label:e.name,style:{margin:\"3px\"},onDelete:function(){return function(e){console.log(e),t(\"tags\",n.tags.filter((function(n){return n.id!=e.id}))),p((function(n){return n.concat(e)}))}(e)}})})),d(u.a,{style:{marginTop:\"10px\",marginBottom:\"10px\"}}),g.length?d(o.a,{as:\"h6\",content:\"Click to add tags\"}):d(o.a,{as:\"h6\",content:\"No Additional Tags Left\"}),g.map((function(e){return d(c.a,{key:e.id,size:\"small\",variant:\"outlined\",color:\"secondary\",label:e.name,style:{margin:\"3px\"},onClick:function(){return function(e){console.log(e),p((function(n){return n.filter((function(n){return n.id!=e.id}))})),t(\"tags\",n.tags.concat(e))}(e)}})})))}},R9qi:function(e,n,t){\"use strict\";t.d(n,\"d\",(function(){return d})),t.d(n,\"a\",(function(){return m})),t.d(n,\"e\",(function(){return g})),t.d(n,\"c\",(function(){return p})),t.d(n,\"b\",(function(){return f}));var a=t(\"h4VS\"),r=t(\"lTCR\"),i=t.n(r);function o(){var e=Object(a.a)([\"\\n  query getProject($id: ID!) {\\n    project(id: $id) {\\n      id\\n      createdAt\\n      updatedAt\\n      name\\n      status\\n      shortDescription\\n      description\\n      titleImage {\\n        id\\n        url\\n      }\\n      organization {\\n        id\\n        profilePicture {\\n          id\\n          url\\n        }\\n        organizationName\\n      }\\n      targetAmount\\n      relatedImages {\\n        id\\n        url\\n      }\\n      donations {\\n        id\\n      }\\n      reviews {\\n        id\\n      }\\n      tags {\\n        id\\n        name\\n      }\\n      updates {\\n        id\\n      }\\n    }\\n  }\\n\"]);return o=function(){return e},e}function l(){var e=Object(a.a)([\"\\n  query {\\n    tags {\\n      id\\n      name\\n      description\\n    }\\n  }\\n\"]);return l=function(){return e},e}function c(){var e=Object(a.a)([\"\\n  query organizationInfo($fields: JSON) {\\n    organizations(where: $fields) {\\n      id\\n      organizationName\\n      registrationNumber\\n      focalPerson\\n      address\\n      mobileNumber\\n      overview\\n      mission\\n      user {\\n        id\\n        email\\n        role {\\n          name\\n        }\\n      }\\n      profilePicture {\\n        id\\n        url\\n      }\\n      coverImage {\\n        id\\n        url\\n      }\\n\\n      projects {\\n        id\\n      }\\n\\n      taxExemptionForm {\\n        id\\n        url\\n      }\\n      registrationCertificate {\\n        id\\n        url\\n      }\\n    }\\n  }\\n\"]);return c=function(){return e},e}function s(){var e=Object(a.a)([\"\\n  query DonorInfo($fields: JSON) {\\n    donors(where: $fields) {\\n      id\\n      fullName\\n      profilePicture {\\n        id\\n        url\\n      }\\n      preferredTags {\\n        id\\n        name\\n        description\\n      }\\n      user {\\n        id\\n        email\\n        role {\\n          name\\n        }\\n      }\\n      creditAmount\\n      mobileNumber\\n      cnic\\n    }\\n  }\\n\"]);return s=function(){return e},e}function u(){var e=Object(a.a)([\"\\n  query {\\n    me {\\n      id\\n      confirmed\\n      blocked\\n      role {\\n        name\\n      }\\n    }\\n  }\\n\"]);return u=function(){return e},e}var d=i()(u()),m=i()(s()),g=i()(c()),p=i()(l()),f=i()(o())},gFQV:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/addProject\",function(){return t(\"3en3\")}])}},[[\"gFQV\",0,2,1,3,4,5,6,10,9,8,11,12,13,14,15,16,7]]]);","extractedComments":[]}