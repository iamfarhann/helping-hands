{"ast":null,"code":"var _jsxFileName = \"/Users/mahad/Local Disk/FYP-FE/helping-hands/pages/portfolio.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Fragment } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"../common/src/components/Image\";\nconst heartImage = \"/image/charity/heart-alt.svg\";\nimport Head from \"next/head\";\nimport Sticky from \"react-stickynode\";\nimport { ThemeProvider } from \"styled-components\";\nimport { charityTheme } from \"../common/src/theme/charity\";\nimport { ResetCSS } from \"../common/src/assets/css/style\";\nimport { DrawerProvider } from \"../common/src/contexts/DrawerContext\";\nimport Navbar from \"../containers/Charity/Navbar\";\nimport DrawerSection from \"../containers/Charity/DrawerSection\";\nimport Footer from \"../containers/Charity/Footer\";\nimport { GlobalStyle, CharityWrapper, ContentWrapper } from \"../containers/Charity/charity.style\";\nimport { Box, Container, Typography, Grid, Paper, Divider } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport InboxIcon from \"@material-ui/icons/Inbox\";\nimport DraftsIcon from \"@material-ui/icons/Drafts\";\nimport Button from \"../common/src/components/Button\";\nimport Heading from \"../common/src/components/Heading\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport BusinessCenterIcon from \"@material-ui/icons/BusinessCenter\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\nimport TextField from \"@material-ui/core/TextField\";\nimport TextareaAutosize from \"@material-ui/core/TextareaAutosize\";\nimport PasswordField from \"material-ui-password-field\";\nimport Text from \"../common/src/components/Text\";\nimport OrganizationList from \"../common/src/components/HelpingHands/OrganizationList\";\nimport InputGroup from \"../common/src/components/InputGroup\";\nimport RadioGroup from \"../common/src/components/RadioGroup\";\nimport SectionWrapper, { ContentArea, ButtonGroup, DonationForm, DonateButton } from \"../containers/Charity/donateSection/donateSection.style\";\nimport { paymentPolicy, currencyOptions } from \"../common/src/data/Charity\";\nimport { useData, useDispatchUser } from \"../lib/userData\";\nimport { GET_ORGANIZATION_NAMES } from \"../lib/queries\";\nimport { CREATE_PORTFOLIO, UPDATE_PORTFOLIO } from \"../lib/mutations\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport moment from \"moment\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nfunction ListItemLink(props) {\n  return __jsx(ListItem, _extends({\n    button: true,\n    component: \"a\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 10\n    }\n  }));\n}\n\nexport default (() => {\n  const classes = useStyles();\n  const paymentPolicy = [{\n    id: 1,\n    title: \"One Time\",\n    value: \"once\",\n    text: \"One Time donation given\"\n  }, {\n    id: 2,\n    title: \"Ongoing\",\n    value: \"monthly\",\n    text: \"Everymonth donation given\"\n  }];\n  const dispatch = useDispatchUser();\n  const {\n    0: createLoading,\n    1: setCreateLoading\n  } = useState(false);\n  const {\n    0: createError,\n    1: setCreateError\n  } = useState(\"\");\n  const {\n    0: portfolio,\n    1: setPortfolio\n  } = useState(false);\n  const {\n    0: refetchNow,\n    1: setRefetchNow\n  } = useState(false);\n  const donor = useData();\n\n  const handleFormData = (value, name) => {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      [name]: value\n    }));\n  };\n\n  const handleDonation = e => {\n    e.preventDefault();\n    console.log(\"Donation form data: \", state);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      price: \"\"\n    }));\n  };\n\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useQuery(GET_ORGANIZATION_NAMES);\n  const [createPortfolio] = useMutation(CREATE_PORTFOLIO, {\n    onCompleted: data => {\n      console.log(data, \"Portfolio Completed\");\n      setPortfolio(false);\n      dispatch({\n        type: \"UPDATE\",\n        payload: _objectSpread(_objectSpread({}, donor), {}, {\n          portfolios: donor.portfolios.concat(data.createPortfolio.portfolio)\n        })\n      });\n      setRefetchNow(true);\n      setCreateError(\"Review Added succesfully!\");\n      setCreateLoading(false);\n      handleReset();\n    },\n    onError: error => {\n      console.log(error);\n      setCreateError(\"Sorry an error occurred. Please try again!\");\n    }\n  });\n  const [updatePortfolio] = useMutation(UPDATE_PORTFOLIO, {\n    onCompleted: data => {\n      console.log(data, \"Portfolio UPDATED\");\n      setPortfolio(false);\n      dispatch({\n        type: \"UPDATE\",\n        payload: _objectSpread(_objectSpread({}, donor), {}, {\n          portfolios: donor.portfolios.concat(data.updatePortfolio.portfolio)\n        })\n      });\n      setRefetchNow(true);\n      setCreateError(\"Review Added succesfully!\");\n      setCreateLoading(false);\n      handleReset();\n    },\n    onError: error => {\n      console.log(error);\n      setCreateError(\"Sorry an error occurred. Please try again!\");\n    }\n  });\n  const schemas = [{\n    paymentSize: Yup.number().required(\"Please enter a valid donation size.\"),\n    organization: Yup.string(),\n    period: Yup.string().required(\"Please enter the period.\")\n  }];\n  const {\n    handleBlur,\n    handleChange,\n    handleSubmit,\n    handleReset,\n    values,\n    touched,\n    errors,\n    setFieldValue\n  } = useFormik({\n    initialValues: {\n      paymentSize: 0,\n      period: \"once\",\n      organization: \"\"\n    },\n    onSubmit: values => {\n      setCreateLoading(true);\n      setCreateError(null);\n\n      if (donor.portfolios.filter(portfolio => portfolio.organization.organizationName == values.organization).length) {\n        console.log(\"if block\");\n        updatePortfolio({\n          variables: {\n            field: {\n              data: {\n                paymentSize: parseInt(values.paymentSize),\n                period: values.period,\n                paymentDate: moment().format(\"YYYY-MM-DD\")\n              },\n              where: {\n                id: donor.portfolios.filter(portfolio => portfolio.organization.organizationName == values.organization)[0].id\n              }\n            }\n          }\n        });\n      } else {\n        createPortfolio({\n          variables: {\n            field: {\n              data: {\n                paymentSize: parseInt(values.paymentSize),\n                period: values.period,\n                donor: donor ? donor.id : null,\n                organization: data.organizations.filter(organization => organization.organizationName == values.organization)[0].id,\n                paymentDate: moment().format(\"YYYY-MM-DD\")\n              }\n            }\n          }\n        });\n      }\n    },\n    validationSchema: Yup.object().shape(schemas[0])\n  });\n  useEffect(() => {\n    if (data) {\n      setFieldValue(\"organization\", data.organizations[0].organizationName);\n    }\n  }, [data]);\n  return __jsx(ThemeProvider, {\n    theme: charityTheme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 5\n    }\n  }, __jsx(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, \"My Account | Esaar\"), __jsx(\"meta\", {\n    name: \"Description\",\n    content: \"React next landing page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }\n  }), __jsx(\"meta\", {\n    name: \"theme-color\",\n    content: \"#FCF22B\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 11\n    }\n  }), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1.0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }), __jsx(\"link\", {\n    href: \"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap\",\n    rel: \"stylesheet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  })), __jsx(ResetCSS, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }), __jsx(GlobalStyle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }\n  }), __jsx(CharityWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, __jsx(Sticky, {\n    top: 0,\n    innerZ: 9999,\n    activeClass: \"sticky-nav-active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }, __jsx(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  })), __jsx(DrawerProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, __jsx(DrawerSection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  })), __jsx(ContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    style: {\n      maxWidth: \"1170px\",\n      minHeight: \"100vh\",\n      paddingTop: \"140px\",\n      marginLeft: \"170px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }, __jsx(Paper, {\n    style: {\n      height: \"90vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 17\n    }\n  }, __jsx(Container, {\n    style: {\n      padding: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, __jsx(List, {\n    component: \"nav\",\n    \"aria-label\": \"main mailbox folders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 23\n    }\n  }, __jsx(Link, {\n    href: \"/account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 25\n    }\n  }, __jsx(ListItem, {\n    button: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 27\n    }\n  }, __jsx(ListItemIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 29\n    }\n  }, __jsx(AccountCircleIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 31\n    }\n  })), __jsx(ListItemText, {\n    primary: \"My Profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 29\n    }\n  }))), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }), __jsx(ListItem, {\n    button: true,\n    component: \"a\",\n    href: \"/portfolio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, __jsx(ListItemIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 27\n    }\n  }, __jsx(BusinessCenterIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 29\n    }\n  })), __jsx(ListItemText, {\n    primary: \"Portfolio \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 27\n    }\n  })), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 25\n    }\n  }), __jsx(ListItem, {\n    button: true,\n    component: \"a\",\n    href: \"/pastProject\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }, __jsx(ListItemIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 27\n    }\n  }, __jsx(AssessmentIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 29\n    }\n  })), __jsx(ListItemText, {\n    primary: \"Past Projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 27\n    }\n  })), __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 25\n    }\n  }), __jsx(ListItem, {\n    button: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 25\n    }\n  }, __jsx(ListItemIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 27\n    }\n  }, __jsx(PowerSettingsNewIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 29\n    }\n  })), __jsx(ListItemText, {\n    primary: \"Logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 27\n    }\n  }))))))), __jsx(Grid, {\n    item: true,\n    md: 8,\n    style: {\n      marginLeft: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 15\n    }\n  }, __jsx(Paper, {\n    style: {\n      height: \"125vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 17\n    }\n  }, __jsx(Container, {\n    style: {\n      padding: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 19\n    }\n  }, \" \", __jsx(Heading, {\n    content: \"Portfolio\",\n    color: \"#05B890\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 21\n    }\n  }), \" \", __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 69\n    }\n  }), __jsx(DonationForm, {\n    onSubmit: e => handleDonation(e),\n    style: {\n      width: \"550px\",\n      marginLeft: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 21\n    }\n  }, __jsx(InputGroup, {\n    inputType: \"number\",\n    placeholder: \"0\",\n    inputValue: values.paymentSize,\n    inputOnChange: e => setFieldValue(\"paymentSize\", e.target.value),\n    currency: data ? data.organizations[0].organizationName : \"\",\n    selectedValue: values.organization,\n    selectOptions: data ? data.organizations.map(organization => {\n      return {\n        id: organization.id,\n        title: organization.organizationName,\n        value: organization.organizationName\n      };\n    }) : [],\n    selectOnUpdate: value => {\n      console.log(\"value:\", value);\n      setFieldValue(\"organization\", value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 23\n    }\n  }), errors.paymentSize ? __jsx(Box, {\n    width: \"100%\",\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 25\n    }\n  }, __jsx(Text, {\n    content: errors.paymentSize,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 27\n    }\n  })) : null, __jsx(RadioGroup, {\n    name: \"period\",\n    value: paymentPolicy.id,\n    items: paymentPolicy,\n    onUpdate: value => setFieldValue(\"period\", value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 23\n    }\n  }), __jsx(DonateButton, {\n    type: \"submit\",\n    onClick: handleSubmit,\n    loading: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 23\n    }\n  }, \"Add to protfolio\", __jsx(Image, {\n    src: heartImage,\n    alt: \"Charity Landing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 25\n    }\n  }))), __jsx(Heading, {\n    content: \"My Organizations\",\n    color: \"#05B890\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 21\n    }\n  }), \" \", __jsx(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 21\n    }\n  }), __jsx(OrganizationList, {\n    refetchNow: refetchNow,\n    setRefetchNow: setRefetchNow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 21\n    }\n  })))))), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 11\n    }\n  }))));\n});","map":{"version":3,"sources":["/Users/mahad/Local Disk/FYP-FE/helping-hands/pages/portfolio.js"],"names":["React","Fragment","useEffect","useState","Link","Image","heartImage","Head","Sticky","ThemeProvider","charityTheme","ResetCSS","DrawerProvider","Navbar","DrawerSection","Footer","GlobalStyle","CharityWrapper","ContentWrapper","Box","Container","Typography","Grid","Paper","Divider","makeStyles","List","ListItem","ListItemIcon","ListItemText","InboxIcon","DraftsIcon","Button","Heading","AccountCircleIcon","BusinessCenterIcon","AssessmentIcon","PowerSettingsNewIcon","TextField","TextareaAutosize","PasswordField","Text","OrganizationList","InputGroup","RadioGroup","SectionWrapper","ContentArea","ButtonGroup","DonationForm","DonateButton","paymentPolicy","currencyOptions","useData","useDispatchUser","GET_ORGANIZATION_NAMES","CREATE_PORTFOLIO","UPDATE_PORTFOLIO","useQuery","useMutation","useFormik","Yup","moment","useStyles","theme","root","width","maxWidth","backgroundColor","palette","background","paper","ListItemLink","props","classes","id","title","value","text","dispatch","createLoading","setCreateLoading","createError","setCreateError","portfolio","setPortfolio","refetchNow","setRefetchNow","donor","handleFormData","name","setState","state","handleDonation","e","preventDefault","console","log","price","data","loading","error","refetch","createPortfolio","onCompleted","type","payload","portfolios","concat","handleReset","onError","updatePortfolio","schemas","paymentSize","number","required","organization","string","period","handleBlur","handleChange","handleSubmit","values","touched","errors","setFieldValue","initialValues","onSubmit","filter","organizationName","length","variables","field","parseInt","paymentDate","format","where","organizations","validationSchema","object","shape","minHeight","paddingTop","marginLeft","height","padding","target","map"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\nimport { useEffect, useState } from \"react\";\n\nimport Link from \"next/link\";\nimport Image from \"../common/src/components/Image\";\nconst heartImage = \"/image/charity/heart-alt.svg\";\nimport Head from \"next/head\";\nimport Sticky from \"react-stickynode\";\nimport { ThemeProvider } from \"styled-components\";\nimport { charityTheme } from \"../common/src/theme/charity\";\nimport { ResetCSS } from \"../common/src/assets/css/style\";\nimport { DrawerProvider } from \"../common/src/contexts/DrawerContext\";\nimport Navbar from \"../containers/Charity/Navbar\";\nimport DrawerSection from \"../containers/Charity/DrawerSection\";\nimport Footer from \"../containers/Charity/Footer\";\nimport {\n  GlobalStyle,\n  CharityWrapper,\n  ContentWrapper,\n} from \"../containers/Charity/charity.style\";\nimport {\n  Box,\n  Container,\n  Typography,\n  Grid,\n  Paper,\n  Divider,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport InboxIcon from \"@material-ui/icons/Inbox\";\nimport DraftsIcon from \"@material-ui/icons/Drafts\";\nimport Button from \"../common/src/components/Button\";\nimport Heading from \"../common/src/components/Heading\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport BusinessCenterIcon from \"@material-ui/icons/BusinessCenter\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\nimport TextField from \"@material-ui/core/TextField\";\nimport TextareaAutosize from \"@material-ui/core/TextareaAutosize\";\nimport PasswordField from \"material-ui-password-field\";\n\nimport Text from \"../common/src/components/Text\";\nimport OrganizationList from \"../common/src/components/HelpingHands/OrganizationList\";\nimport InputGroup from \"../common/src/components/InputGroup\";\nimport RadioGroup from \"../common/src/components/RadioGroup\";\nimport SectionWrapper, {\n  ContentArea,\n  ButtonGroup,\n  DonationForm,\n  DonateButton,\n} from \"../containers/Charity/donateSection/donateSection.style\";\n\nimport { paymentPolicy, currencyOptions } from \"../common/src/data/Charity\";\n\nimport { useData, useDispatchUser } from \"../lib/userData\";\nimport { GET_ORGANIZATION_NAMES } from \"../lib/queries\";\n\nimport { CREATE_PORTFOLIO, UPDATE_PORTFOLIO } from \"../lib/mutations\";\n\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\n\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport moment from \"moment\";\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n\nfunction ListItemLink(props) {\n  return <ListItem button component=\"a\" {...props} />;\n}\n\nexport default () => {\n  const classes = useStyles();\n  const paymentPolicy = [\n    {\n      id: 1,\n      title: \"One Time\",\n      value: \"once\",\n      text: \"One Time donation given\",\n    },\n    {\n      id: 2,\n      title: \"Ongoing\",\n      value: \"monthly\",\n      text: \"Everymonth donation given\",\n    },\n  ];\n\n  const dispatch = useDispatchUser();\n  const [createLoading, setCreateLoading] = useState(false);\n  const [createError, setCreateError] = useState(\"\");\n\n  const [portfolio, setPortfolio] = useState(false);\n\n  const [refetchNow, setRefetchNow] = useState(false);\n  const donor = useData();\n\n  const handleFormData = (value, name) => {\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const handleDonation = (e) => {\n    e.preventDefault();\n    console.log(\"Donation form data: \", state);\n\n    setState({\n      ...state,\n      price: \"\",\n    });\n  };\n  const { data, loading, error, refetch } = useQuery(GET_ORGANIZATION_NAMES);\n\n  const [createPortfolio] = useMutation(CREATE_PORTFOLIO, {\n    onCompleted: (data) => {\n      console.log(data, \"Portfolio Completed\");\n\n      setPortfolio(false);\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          ...donor,\n          portfolios: donor.portfolios.concat(data.createPortfolio.portfolio),\n        },\n      });\n      setRefetchNow(true);\n      setCreateError(\"Review Added succesfully!\");\n      setCreateLoading(false);\n      handleReset();\n    },\n    onError: (error) => {\n      console.log(error);\n      setCreateError(\"Sorry an error occurred. Please try again!\");\n    },\n  });\n  const [updatePortfolio] = useMutation(UPDATE_PORTFOLIO, {\n    onCompleted: (data) => {\n      console.log(data, \"Portfolio UPDATED\");\n\n      setPortfolio(false);\n      dispatch({\n        type: \"UPDATE\",\n        payload: {\n          ...donor,\n          portfolios: donor.portfolios.concat(data.updatePortfolio.portfolio),\n        },\n      });\n      setRefetchNow(true);\n      setCreateError(\"Review Added succesfully!\");\n      setCreateLoading(false);\n      handleReset();\n    },\n    onError: (error) => {\n      console.log(error);\n      setCreateError(\"Sorry an error occurred. Please try again!\");\n    },\n  });\n  const schemas = [\n    {\n      paymentSize: Yup.number().required(\"Please enter a valid donation size.\"),\n      organization: Yup.string(),\n      period: Yup.string().required(\"Please enter the period.\"),\n    },\n  ];\n\n  const {\n    handleBlur,\n    handleChange,\n    handleSubmit,\n    handleReset,\n    values,\n    touched,\n    errors,\n    setFieldValue,\n  } = useFormik({\n    initialValues: {\n      paymentSize: 0,\n      period: \"once\",\n      organization: \"\",\n    },\n    onSubmit: (values) => {\n      setCreateLoading(true);\n      setCreateError(null);\n\n      if (\n        donor.portfolios.filter(\n          (portfolio) =>\n            portfolio.organization.organizationName == values.organization\n        ).length\n      ) {\n        console.log(\"if block\");\n        updatePortfolio({\n          variables: {\n            field: {\n              data: {\n                paymentSize: parseInt(values.paymentSize),\n                period: values.period,\n                paymentDate: moment().format(\"YYYY-MM-DD\"),\n              },\n              where: {\n                id: donor.portfolios.filter(\n                  (portfolio) =>\n                    portfolio.organization.organizationName ==\n                    values.organization\n                )[0].id,\n              },\n            },\n          },\n        });\n      } else {\n        createPortfolio({\n          variables: {\n            field: {\n              data: {\n                paymentSize: parseInt(values.paymentSize),\n                period: values.period,\n                donor: donor ? donor.id : null,\n                organization: data.organizations.filter(\n                  (organization) =>\n                    organization.organizationName == values.organization\n                )[0].id,\n                paymentDate: moment().format(\"YYYY-MM-DD\"),\n              },\n            },\n          },\n        });\n      }\n    },\n\n    validationSchema: Yup.object().shape(schemas[0]),\n  });\n\n  useEffect(() => {\n    if (data) {\n      setFieldValue(\"organization\", data.organizations[0].organizationName);\n    }\n  }, [data]);\n  return (\n    <ThemeProvider theme={charityTheme}>\n      <Fragment>\n        {/* Start charity head section */}\n        <Head>\n          <title>My Account | Esaar</title>\n          <meta name=\"Description\" content=\"React next landing page\" />\n          <meta name=\"theme-color\" content=\"#FCF22B\" />\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale=1.0\"\n          />\n          {/* Load google fonts */}\n          <link\n            href=\"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800&display=swap\"\n            rel=\"stylesheet\"\n          />\n        </Head>\n        <ResetCSS />\n        <GlobalStyle />\n        <CharityWrapper>\n          <Sticky top={0} innerZ={9999} activeClass=\"sticky-nav-active\">\n            <Navbar />\n          </Sticky>\n          <DrawerProvider>\n            <DrawerSection />\n          </DrawerProvider>\n          <ContentWrapper>\n            <Grid\n              container\n              style={{\n                maxWidth: \"1170px\",\n                minHeight: \"100vh\",\n                paddingTop: \"140px\",\n                marginLeft: \"170px\",\n              }}\n            >\n              <Grid item md={3}>\n                <Paper style={{ height: \"90vh\" }}>\n                  <Container style={{ padding: \"40px\" }}>\n                    <div className={classes.root}>\n                      <List component=\"nav\" aria-label=\"main mailbox folders\">\n                        <Link href=\"/account\">\n                          <ListItem button>\n                            <ListItemIcon>\n                              <AccountCircleIcon />\n                            </ListItemIcon>\n                            <ListItemText primary=\"My Profile\" />\n                          </ListItem>\n                        </Link>\n                        <Divider />\n                        <ListItem button component=\"a\" href=\"/portfolio\">\n                          <ListItemIcon>\n                            <BusinessCenterIcon />\n                          </ListItemIcon>\n                          <ListItemText primary=\"Portfolio \" />\n                        </ListItem>\n                        <Divider />\n                        <ListItem button component=\"a\" href=\"/pastProject\">\n                          <ListItemIcon>\n                            <AssessmentIcon />\n                          </ListItemIcon>\n                          <ListItemText primary=\"Past Projects\" />\n                        </ListItem>\n                        <Divider />\n                        <ListItem button>\n                          <ListItemIcon>\n                            <PowerSettingsNewIcon />\n                          </ListItemIcon>\n                          <ListItemText primary=\"Logout\" />\n                        </ListItem>\n                      </List>\n                    </div>\n                  </Container>\n                </Paper>\n              </Grid>\n              <Grid item md={8} style={{ marginLeft: \"30px\" }}>\n                <Paper style={{ height: \"125vh\" }}>\n                  <Container style={{ padding: \"40px\" }}>\n                    {\" \"}\n                    <Heading content=\"Portfolio\" color=\"#05B890\" /> <Divider />\n                    <DonationForm\n                      onSubmit={(e) => handleDonation(e)}\n                      style={{ width: \"550px\", marginLeft: \"50px\" }}\n                    >\n                      <InputGroup\n                        inputType=\"number\"\n                        placeholder=\"0\"\n                        inputValue={values.paymentSize}\n                        inputOnChange={(e) =>\n                          setFieldValue(\"paymentSize\", e.target.value)\n                        }\n                        currency={\n                          data ? data.organizations[0].organizationName : \"\"\n                        }\n                        selectedValue={values.organization}\n                        selectOptions={\n                          data\n                            ? data.organizations.map((organization) => {\n                                return {\n                                  id: organization.id,\n                                  title: organization.organizationName,\n                                  value: organization.organizationName,\n                                };\n                              })\n                            : []\n                        }\n                        selectOnUpdate={(value) => {\n                          console.log(\"value:\", value);\n                          setFieldValue(\"organization\", value);\n                        }}\n                      />\n                      {errors.paymentSize ? (\n                        <Box width=\"100%\" p={2}>\n                          <Text content={errors.paymentSize} />\n                        </Box>\n                      ) : null}\n                      <RadioGroup\n                        name=\"period\"\n                        value={paymentPolicy.id}\n                        items={paymentPolicy}\n                        onUpdate={(value) => setFieldValue(\"period\", value)}\n                      />\n\n                      <DonateButton\n                        type=\"submit\"\n                        onClick={handleSubmit}\n                        loading={true}\n                      >\n                        Add to protfolio\n                        <Image src={heartImage} alt=\"Charity Landing\" />\n                      </DonateButton>\n                    </DonationForm>\n                    <Heading content=\"My Organizations\" color=\"#05B890\" />{\" \"}\n                    <Divider />\n                    <OrganizationList\n                      refetchNow={refetchNow}\n                      setRefetchNow={setRefetchNow}\n                    />\n                  </Container>\n                </Paper>\n              </Grid>\n            </Grid>\n          </ContentWrapper>\n          <Footer />\n        </CharityWrapper>\n        {/* End of charity wrapper section */}\n      </Fragment>\n    </ThemeProvider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}